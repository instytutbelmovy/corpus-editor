
# Што тут агулам ёсьць
- Унутры тэчкі Editor ўсё акрамя /src, гэта бэкэнд рэдактара на dotnet.
- Editor/src франтэнд рэдактара на React/Next.js.
- GrammarDbConverter - маленькая прыблуда сканвэртаваць xml файлы граматычнай базы ў sqlite для працы бэкэнда.
- Editor.Tests гэта юніт тэсты для бэкэнда рэдактара

# Як гэта запускаць
Пакуль што складаней пачаць працаваць з праэктам чым было б варта, але з часам стане лепей.
Спатрэбяцца dotnet sdk 10 і nodejs 22.
1. Трэба сканвэртаваць файлы граматычнае базы.
   Узяць іх можна тут https://github.com/Belarus/GrammarDB/tree/master/data
   `GrammarDbConverter> dotnet run -- path-to-GrammarDb-data ../Editor.files/grammar.db`
   Альбо можна адразу сам файл вынік папрасіць у мяне.
2. Трэба мець ключы для доступу да s3 кошыку з файламі verti (Aws:SecretAccessKey). Ключы можна ўзяць у мяне, альбо можна выкарыстоўваць які ўласны кошык замест ibm-editor-dev і свае ключы.
   А яшчэ, калі дасылаць мэйлы патрэбны ключ мэйл сэрвісу (Email:ApiKey).
3. Сабраць франтэнд.
   `Editor/src> npm install`
   `Editor/src> npm run build`
4. `Editor> dotnet run`
   Важна што фронт мусіць быць сабраны спачатку. Бо бэкэнд зьбірае вынікі зборкі франта.

# Як гэта распрацоўваць
## Бэкэнд
Калі з большага працаваць на бэкэндзе то можа прасьцей сабраць фронт (`Editor/src> npm run build`), калі той наогул патрэбны, і далей ужо рабіць штось на бэку і перазьбіраць/запускаць яго. Па дэфолту дасяжны на http://localhost:5087.
Сабраны такім чынам фронт складвае вынік зборкі ў wwwroot, адкуль усе файлы падхоплівае бэкэнд і аддае браўзэру.

## Франтэнд
Калі асноўная праца на бэкэндзе, то зручней запусьціць бэкэнд асобна, а фронт ужо запускаць у распрацоўным рэжыме (`Editor/src> npm run dev`), і даступацца да яго праз http://localhost:3000.
Запушчаны такім чынам франтэнд перасылае запросы да /api на http://localhost:5087 (глядзі src/next.config.ts).
Акрамя таго на франце можна запускаць тэсты `npm run test`.

Калі вы першы раз запусьцілі ў сябе праэкт, і ня ведаеце як залагініцца, то зь першае спробы лагіну насамрэч будзе створаны карыстальнік з адмінскаю роляю (глядзі Auth.cs). Абмежаваньне на пароль толькі даўжыня мінімум 10 сімвалаў.

## Зборка ў Docker вобраз
`Editor> docker build .`


# Агульная філязофія
Яе няма. Бэкэнд гэта вынік шызафрэнічнага мозгу, калі я часам спрабаваў зрабіць штось надта эфэктыўна, а часам клаў гык і проста рабіў штось хутка. Ідэя была ашчадзіць выдаткі на сэрвэрную інфраструктуру дзе RAM уплывае на кошт, але сказаць што ўсё эфэктыўна працуе з памяцьцю было б жудаснаю брахнёю.
Фронт наогул навайбкоджэн з ШІ. Я ня ведаю як ён працуе, але хоць выглядае міленька.